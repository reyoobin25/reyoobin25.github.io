---
layout: post
title: "[TIL] 알림"
date: 2020-08-17 14:00:00
categories: TIL
permalink: /til/alarm
---



# 알림

> - Web polling : Polling, Long Polling, Streaming
> - Web push : WebSocket, Server Sent Events(SSE)

HTTP 프로토콜로 통신하는 경우, 연결이 유지되지 않아 서버에서 먼저 요청을 보내는 것이 불가능하다. Polling, Long Polling, Streaming 의 양방향 통신 방식을 이용해 비슷한 효과를 구현할 수 있다.

**Web polling**

1. Polling
   - **Client에서 일정 주기마다 요청**을 보내고, 서버는 현재 상태를 응답해주는 방식이다. 
   - 이 방식의 경우, 실시간으로 반영이 되어야 하는 서비스에서는 좋지 않으며, 변경된 것이 없더라도 매 요청마다 응답을 내려줘야 하기때문에 불필요한 트래픽이 다량으로 발생하게 된다. (주기 ↑, 요청 ↑)
   - 실시간 처럼 보이기 위해서는 주기를 늘려야 하는데, 주기를 늘린 만큼의 불필요한 트래픽이 많아지기 때문에 실시간 서비스에 사용하기는 어렵다.
   - ![polling01](..\img\polling01.JPG)

2. Long Polling
   - Client에서 요청을 보내고 서버에서는 **이벤트가 발생했을 때** 응답을 내려주고 Client가 응답을 받았을 때 다시 다음 응답을 기다리는 요청을 보내는 방식이다.
   - 실시간 반응이 가능하고  Polling에 비해 불필요한 트래픽은 덜 발생하나 이벤트가 많을 경우 순간적인 과부하가 걸릴 수 있다.
   - 이때, 대기시간은 무한정이 아닌 구현에 따라 시간을 정할 수 있다.
   - ![polling02](..\img\polling02.JPG)

3. Streaming

   - 이벤트가 발생했을 때 응답을 내려주는데 응답을 완료시키지 않고 계속 연결을 유지하는 방식이다.
   - Long Polling에 비해 응답마다 다시 요청을 하지 않아도 되므로 효율적이지만, 연결 시간이 길어질수록 연결의 유효성 관리의 부담이 생길 수 있다.

   

**Web push**

1. WebSocket
   - 웹 서버와 웹 브라우저간 실시간 양방향 통신환경을 제공해주는 실시간 통신기술이다. 위 Polling 방식(요청 - 응답의 형식)과 다르게 양방향으로 원할때 요청을 보낼 수 있으며 오버헤드가 적다.
   - TCP 연결을 통해 양방향 데이터 통신을 제공하는 방식이다.
   - ![polling03](..\img\polling03.JPG)
   - http에서 ws로 전환한다.
   - WS는 모듈을 이용해 쉽게 구현이 가능하다. (<https://github.com/websockets/ws/blob/HEAD/doc/ws.md>)
2. Server Sent Events(SSE)
   - HTTP 연결을 통해 서버에서 Client로 데이터를 수신가능하게 한 방식이다.
   - 연결된 상태를 유지하고 서버가 일방적으로 데이터를 전송한다. 사용자는 메시지를 확인하는 과정이 필요하다.
   - WebSocket과는 다르게 자동으로 재 연결을 한다.

참고 사이트 : <https://m.mkexdev.net/98>